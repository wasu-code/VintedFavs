{{> header.html}}

<h1>Search</h1>

<form onsubmit="submitForm(); return false;">
    <input type="text" name="q" id="searchInput" aria-label="Search" value="{{query}}" placeholder="Rower">
    <select name="sort"  id="sortSelect">
        <option value="relevance">Relevance</option>
        <option value="date">Date</option>
        <option value="fav">Ulubione</option>
        <!-- Add more options based on your sorting criteria -->
    </select>
    <button type="submit">Search</button>
</form>

<div class="albums">
  {{#items}}
    <a href="{{url}}">
      <h2>{{title}}</h2>
      {{#photo}}
        <img src="{{url}}" alt="zdjÄ™cie"/>
      {{/photo}}
      <p>{{price}} {{currency}}</p>
      <p>ðŸ’—{{favourite_count}}</p>
    </a>
  {{/items}}
</div>

<script>
    function submitForm() {
        var searchInputValue = document.getElementById('searchInput').value;
        var sortSelectValue = document.getElementById('sortSelect').value;

        // Construct the URL with the search parameter and sort parameter
        var url = '/' + encodeURIComponent(searchInputValue) + '?sort=' + encodeURIComponent(sortSelectValue);

        // Redirect to the constructed URL
        window.location.href = url;
    }



    // Function to get URL parameter by name
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Get the value of the 'sort' parameter from the URL
    var sortParam = getParameterByName('sort');

    // Set the selected attribute for the corresponding option
    if (sortParam) {
        var sortSelect = document.getElementById('sortSelect');
        var option = sortSelect.querySelector('option[value="' + sortParam + '"]');
        if (option) {
            option.selected = true;
        }
    }
</script>

{{> footer.html}}
